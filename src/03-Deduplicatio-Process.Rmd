---
title: "03-Create Comparison Patterns"
output:
  pdf_document: default
  html_document: default
---


# Deduplication Process:

The dedeuplication process elaborated herein involves the following steps:

*  Compare variables across multiple records and identifying similar pairs assigning a weight
*  Identify potential pairs of records that are similar based on pair weights  
*  Identify a lower and higher threshold across which the records will be considered unique or identical pairs.  The middle region will be potential ones that needs to be further classified - *Unsupervised Classification*  
*  Classification of pairs with optimal thresholds - *Unsupervised Classification with Optimal Threshold*    
*  Classification done using a classifier with a training set created clerically - *Supervised Classification*  
*  As an alternative to the above, the classifier can be created using Machine Learning algorithms - *This is not attempted*

The figure illustrates the process:  
<span>
<center>!["Classification Process"](classification-process.png){width=120%}</center>
<h4><center>Figure.3.1 Classification Process</center></h4> </span>


##Pair comparison and weight

The following rules are observed while comparing pairs and assigning weights:

###Exclusions
* The record id in the dataset is maintained for tracking purpose.  This is not used in the weighing process for comparison.
* The date of birth field is excluded; instead, the three components of the dob (date, month, year) are compared individually

###Blocked fields
* Any entity to be considered for pair comparison, it has been made mandatory that either the last name or the DoB field of the entity needs to be present.  While this could be revoked, this limits the number of pairs generated to a manageable level without undermining the accuracy of the process.

###Phonetic comparison
* The first name and last name of an entity is compared phonetically to ensure typographical errors and ruled out while comparing them.  Thus John and Jon translate to the same  /djon/ in phonetic script.

###String comparison

* All other variables are compared using the string comparison algorithm originally formulated by Fellugi and Sunter[@Winkler1999state].


##Notes:

###Build Comparison Patterns

The component patterns are built as component pairs.  The row numbers of the underlying records are followed by their comparison vector.  The column is_match shows the matching status of a pair: '0' stands for non-match, 1 means, match.  

While doing comparison, certain fields are such as, the First Name and Last Name values are checked for their phonetic equivalents; thereby overcoming spelling anomalies.  

Additionally, columns "record.id" and "birth.date" are excluded from comparison since these are control data: used only for reference purpose.  The date of birth is broken up into date, month and year and further compared.
